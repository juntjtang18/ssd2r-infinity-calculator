<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Infinity Homework Calculator (D2R)</title>
  <style>
    :root { --bg:#0b0d10; --card:#12161c; --text:#e7eef7; --muted:#9db0c6; --line:#223041; --accent:#7bdcff; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--text); }
    .wrap { max-width: 780px; margin: 0 auto; padding: 22px 16px 40px; }
    h1 { margin: 6px 0 6px; font-size: 22px; }
    .sub { color:var(--muted); margin: 0 0 16px; line-height: 1.45; }
    .grid { display:grid; grid-template-columns: 1fr; gap: 12px; }
    @media (min-width: 720px){ .grid { grid-template-columns: 1fr 1fr; } }
    .card { background:var(--card); border:1px solid var(--line); border-radius: 14px; padding: 14px; }
    .card h2 { margin: 0 0 10px; font-size: 15px; color: var(--accent); font-weight: 650; }
    .row { display:flex; gap:10px; align-items:center; margin: 10px 0; }
    label { flex: 1; color:var(--muted); font-size: 13px; }
    input { width: 120px; padding: 10px 10px; border-radius: 10px; border: 1px solid var(--line); background:#0f1318; color:var(--text); font-size: 14px; }
    .btn { width: 100%; padding: 12px 14px; border: 0; border-radius: 12px; background: var(--accent); color:#05202a; font-weight: 750; cursor:pointer; }
    .out { font-size: 26px; font-weight: 800; margin-top: 6px; }
    .tiny { color:var(--muted); font-size: 12px; line-height: 1.45; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; }
    .hr { height:1px; background:var(--line); margin: 10px 0; border:0; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Infinity Homework Calculator (D2R)</h1>
    <p class="sub">
      Fill only 5 numbers. Output is in <span class="mono">hours</span>. (Keys-only model + your key drop rates)<br/>
      Assumptions baked in: TKey=1/14, HKey≈DK≈1/10.5, 1 key = 1/3 Ist, Mal≈0.5 Ist.
    </p>

    <div class="grid">
      <div class="card">
        <h2>Inputs</h2>

        <div class="row">
          <label>Ber price (Ist)</label>
          <input id="ber" type="number" step="0.1" value="20">
        </div>

        <div class="row">
          <label>Jah price (Ist)</label>
          <input id="jah" type="number" step="0.1" value="24">
        </div>

        <hr class="hr"/>

        <div class="row">
          <label>Countess time (min/run)</label>
          <input id="tC" type="number" step="0.1" value="2">
        </div>

        <div class="row">
          <label>Summoner time (min/run)</label>
          <input id="tS" type="number" step="0.1" value="2">
        </div>

        <div class="row">
          <label>Nihlathak time (min/run)</label>
          <input id="tN" type="number" step="0.1" value="2">
        </div>

        <hr class="hr"/>

        <button class="btn" id="calc">Calculate</button>
        <p class="tiny">
          Tip: Use your <b>sustainable</b> average time (e.g., 2.0). “Peak pace” (1.5) isn’t sustainable.
        </p>
      </div>

      <div class="card">
        <h2>Outputs</h2>

        <div class="tiny">Estimated income</div>
        <div class="out"><span id="iph">—</span> <span class="tiny">Ist/hour</span></div>
        <div class="tiny mono" id="kph">—</div>

        <hr class="hr"/>

        <div class="tiny">Targets</div>
        <div class="row">
          <label>Infinity (2×Ber + Mal + Ist)</label>
          <div class="mono" style="width:140px; text-align:right;"><span id="hinf">—</span> h</div>
        </div>

        <div class="row">
          <label>1 Ber</label>
          <div class="mono" style="width:140px; text-align:right;"><span id="hber">—</span> h</div>
        </div>

        <div class="row">
          <label>1 Jah</label>
          <div class="mono" style="width:140px; text-align:right;"><span id="hjah">—</span> h</div>
        </div>

        <p class="tiny">
          If you want a “days plan”: divide hours by your daily playtime (e.g., 4h/day).
        </p>
      </div>

      <div class="card" style="grid-column: 1 / -1;">
        <h2>Notes</h2>
        <ul class="tiny">
          <li>This is the <b>keys pipeline</b> plan. It’s designed to be simple and not scare viewers with run counts.</li>
          <li>Drop-rate constants are your tested model: TKey=1/14, HKey≈DK≈1/10.5.</li>
          <li>Market prices (Ber/Jah) are inputs. Infinity uses Mal≈0.5 Ist as a fixed constant; change it in code if your market differs.</li>
        </ul>
      </div>
    </div>
  </div>

  <script>
    function num(id){ return parseFloat(document.getElementById(id).value); }
    function fmt(x, d=2){ return (isFinite(x) ? x.toFixed(d) : "—"); }

    function calculate(){
      const ber = num("ber");
      const jah = num("jah");
      const tC = num("tC");
      const tS = num("tS");
      const tN = num("tN");

      // constants (your tested model)
      const pT = 1/14;     // Countess TKey per run
      const pH = 1/10.5;   // Summoner HKey per run
      const pD = 1/10.5;   // Nihl DKey per run
      const istPerKey = 1/3;
      const malCostIst = 0.5;

      const runsPerHourC = 60 / tC;
      const runsPerHourS = 60 / tS;
      const runsPerHourN = 60 / tN;

      const keysPerHour = runsPerHourC*pT + runsPerHourS*pH + runsPerHourN*pD;
      const istPerHour = keysPerHour * istPerKey;

      const costInfinity = 2*ber + malCostIst + 1; // 2 Ber + Mal + Ist

      const hInf = costInfinity / istPerHour;
      const hBer = ber / istPerHour;
      const hJah = jah / istPerHour;

      document.getElementById("iph").textContent = fmt(istPerHour, 3);
      document.getElementById("kph").textContent = `Keys/hour ≈ ${fmt(keysPerHour, 3)}  (from C+S+N)`;

      document.getElementById("hinf").textContent = fmt(hInf, 2);
      document.getElementById("hber").textContent = fmt(hBer, 2);
      document.getElementById("hjah").textContent = fmt(hJah, 2);
    }

    document.getElementById("calc").addEventListener("click", calculate);
    ["ber","jah","tC","tS","tN"].forEach(id=>{
      document.getElementById(id).addEventListener("input", calculate);
    });
    calculate();
  </script>
</body>
</html>
